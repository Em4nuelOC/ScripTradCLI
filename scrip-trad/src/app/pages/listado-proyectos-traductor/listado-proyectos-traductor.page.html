<ion-header>
  <ion-toolbar>
    <ion-title>Encargos Traductor</ion-title>
    <!--Imagen de usuario logueado-->
    <ion-avatar slot="end" id="usu" button (click)="mostrarMenu()">
      <img src="{{ usuarioAutenticado != null && usuarioAutenticado.img != null ? 'data:image/png;base64,' + usuarioAutenticado.img : 'assets/img/genericUser.jpg'}}" alt="Imagen usuario">
    </ion-avatar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!--toolbar para ver distintas clasificaciones de proyectos, nuevos, terminados
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button> Nuevos </ion-button>
    </ion-buttons>
    <ion-buttons slot="start">
      <ion-button> Terminados </ion-button>
    </ion-buttons>
  </ion-toolbar>-->

  <ion-toolbar>
    <ion-segment value="tipo">
      <ion-segment-button value="urgente" (click)="cargarProyectosUrgentes();" ngSelected="selected">Urgente</ion-segment-button>
      <ion-segment-button value="proceso">En proceso</ion-segment-button>
      <ion-segment-button value="nuevos">Nuevos</ion-segment-button>
      <ion-segment-button value="todos" (click)="cargarProyectos();">Todos</ion-segment-button>
    </ion-segment>
  </ion-toolbar>


  <!-- Creo un ion-list, cada mensaje será un ion-item -->
<ion-list *ngIf="totalProyectos > 0" id="list">
  <!-- Creo un ion-item por cada elemento del array "mensajes" //  (click)="detalleMensaje(mensaje)" class="{{mensaje.leido ? '' : 'noLeido'}}"-->
  <ion-item *ngFor="let proyecto of proyectos" >
    <!--Imagenes de los idiomas involucrados en la traduccion-->
    
      <ion-thumbnail slot="start">
        <img src="{{ proyecto.lo.img != null ? 'data:image/png;base64,' + proyecto.lo.img : 'assets/img/genericUser.jpg'}}" alt="">
      </ion-thumbnail>
      
      <ion-icon name="arrow-forward-outline" slot="start" style="margin-right: 15px;"></ion-icon>
      <ion-thumbnail slot="start">
        <img src="{{ proyecto.lm.img != null ? 'data:image/png;base64,' + proyecto.lm.img : 'assets/img/genericUser.jpg'}}" alt="">
      </ion-thumbnail>
    
    
    <ion-label id="label" button (click)="mostrarInformacion(proyecto)">
      <ion-text >
        <ion-label>{{proyecto.titulo}}</ion-label>
        <ion-label style="color: rgba(46, 46, 48, 0.788); font-weight: bold;">Info</ion-label>
        
      </ion-text>
  </ion-label>
  <div class="ion-text-center">
      <!-- Utilizo un pipe de tipo date para la fecha del mensaje -->
      <ion-note id="note" >{{proyecto.fechaEntrega | date:'dd MMM YYYY'}}</ion-note>
      <ion-icon name="pencil-outline" style="padding-left: 5px; margin-left: 20px;" (click)="irEditor();"></ion-icon>
  </div>
  </ion-item>
</ion-list>

<!-- Un ion-infinite-scroll simplemente vigila el momento en que llegamos hasta el final
  de la lista. Cuando se llega, se dispara un evento, se muestra un mensaje y una animación.
  El evento lanzado llama a un método para cargar más mensajes.-->
  <ion-infinite-scroll threshold="100px" (ionInfinite)="scrollInfinito($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Cargando proyectos...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>


<ion-footer>
  <ion-toolbar >
    <ion-tabs>
  
      <ion-tab-bar slot="bottom" class="ion-justify-content-around">
        <ion-tab-button tab="listado-proyectos-gestor" (click)="irEditor();">
          <ion-icon name="pencil-outline"></ion-icon>
        </ion-tab-button>
    
        <ion-tab-button tab="tab2" (click)="irInicioTraductor();">
          <ion-icon name="home-outline"></ion-icon>
        </ion-tab-button>
    <!--
        <ion-tab-button tab="tab3">
          <ion-icon name="menu-outline"></ion-icon>
          
        </ion-tab-button>-->
      </ion-tab-bar>
    
    </ion-tabs>
  </ion-toolbar>

</ion-footer>